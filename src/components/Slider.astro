---
import slide1 from "../assets/slide1.png";
import slide2 from "../assets/slide2.png";
import slide3 from "../assets/slide3.png";

const slides = [
    {
        image: slide1,
        title: "Un refugio de paz en la naturaleza",
        description: "Vive experiencias transformadoras en un espacio diseñado para sanar y reconectar.",
        buttonText: "Consultar Ahora",
        position: "object-right",
    },
    {
        image: slide2,
        title: "Ceremonias y encuentros conscientes",
        description: "Conecta contigo mismo y con la comunidad en un entorno de armonía.",
        buttonText: "Consultar Ahora",
        position: "object-center",
    },
    {
        image: slide3,
        title: "Encuentros con la naturaleza",
        description: "Descubre la magia de cada rincón diseñado para acoger, sanar y renovar.",
        buttonText: "Consultar Ahora",
        position: "object-[30%_50%]",
    },
];
---
<div class="relative w-full h-screen overflow-hidden">
    <div id="slider" class="flex transition-transform duration-700 ease-in-out w-full h-full">
        {slides.map((slide, index) => (
            <div class="w-full h-full flex-shrink-0 relative aspect-[16/9]" data-slide={index}>
                <img src={slide.image.src ?? slide.image} alt={slide.title} width="1920" height="1080" class={`w-full h-full object-cover ${slide.position}`} loading="lazy"/>
                <div class="absolute inset-0 flex flex-col items-center justify-center text-white text-center bg-black/40 px-6">
                    <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-3 sm:mb-4 max-w-[80%] sm:max-w-[60%] lg:max-w-[50%] leading-tight drop-shadow-lg">
                        {slide.title}
                    </h2>
                    <p class="text-sm sm:text-base md:text-lg mb-5 max-w-[85%] sm:max-w-[60%] lg:max-w-[45%] opacity-90 drop-shadow-md">
                        {slide.description}
                    </p>
                    <a href="https://wa.link/ngq3h9" class="bg-green-700 hover:bg-green-800 text-white font-semibold py-3 px-6 rounded-lg flex items-center gap-2 transition duration-300" target="_blank">
                        {slide.buttonText}
                        <i class="fa-brands fa-whatsapp"></i>
                    </a>
                </div>
            </div>
        ))}
    </div>

    <button id="prev" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white p-3 cursor-pointer" aria-label="Ir al slider anterior">
        <i class="fa-solid fa-chevron-left fa-2xl"></i>
    </button>
    <button id="next" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white p-3 cursor-pointer" aria-label="Ir al slider siguiente">
        <i class="fa-solid fa-chevron-right fa-2xl"></i>
    </button>
</div>

<script is:inline>
    window.onload = function () {
        const slider = document.getElementById("slider");
        const prev = document.getElementById("prev");
        const next = document.getElementById("next");

        if (!slider || !prev || !next) return;

        let index = 0;
        const slides = slider.children.length;

        function updateSlider() {
            slider.style.transform = `translateX(-${index * 100}%)`;
        }

        function nextSlide() {
            index = (index + 1) % slides;
            updateSlider();
        }

        function prevSlide() {
            index = (index - 1 + slides) % slides;
            updateSlider();
        }

        next.addEventListener("click", nextSlide);
        prev.addEventListener("click", prevSlide);

        setInterval(nextSlide, 4000);
    };
</script>